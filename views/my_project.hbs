<link rel="stylesheet" href="/stylesheets/my_project.css">
<main style="margin-top: 72px" class="container">
    <h4>Tổng quan</h4>
    <div class="row mt-2">
        <div class="col-4">
            <div class="w-100 card bg-danger-subtle" style=" padding: 10px 30px; line-height:30px">
                <div class="card-body">
                    <i style="font-size: 30px; margin-right: 10px" class="fa-solid fa-briefcase"></i>
                    Dự án: {{totalProject}}
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="w-100 card bg-info" style=" padding: 10px 30px; line-height:30px">
                <div class="card-body">
                    <i style="font-size: 30px; margin-right: 10px" class="fa-regular fa-heart"></i> Lượt thích:
                    0
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="w-100 card bg-primary-subtle" style=" padding: 10px 30px; line-height:30px">
                <div class="card-body">
                    <i style="font-size: 30px; margin-right: 10px" class="fa-regular fa-dollar-sign"></i> Doanh
                    thu: {{vndFormat totalRevenue}} (2% phí nền tảng)
                </div>
            </div>
        </div>
        <ul class="row" style="list-style: none;">
            <div class="mt-3">
                <h4>Thống kê dự án</h4>
            </div>
            <div class="">
                <select class="btn border" name="" id="">
                    <option class="btn" value="week">Xem theo tuần</option>
                    <option class="btn" value="week">Xem theo tháng</option>

                </select>
                <button class="btn border bg-success text-white "> Xem</button>
            </div>
            <div class="row mt-2">

                <div class="col-6">
                    <div style="width: 100%;display: inline-block">
                        <canvas id="view-acquisitions"></canvas>
                    </div>
                </div>
                <div class="col-6">
                    <script id="chartDataNewProject" type="application/json">
                        {{{json newProjectWeekStatistic}}}
                                                        </script>
                    <div style="width: 100%;display: inline-block">
                        <canvas id="sold-acquisitions"></canvas>
                    </div>
                </div>
            </div>

            <div class="mt-3">

                <script id="chartDataNewPaid" type="application/json">
                                        {{{json paidWeekStatistic}}}
                                    </script>
                <h4>Các dự án đã tải lên</h4>
                <div class="">Bộ lọc:</div>
                <form id="filterForm" action="/user/projects/{{classificationSlug}}" method="GET">
                    <label class="ms-4" for="orderBy">Sắp xếp theo:</label>
                    <select class="btn border" id="orderBy" name="orderBy">
                        <option {{#if (ifEquals orderBy "name" )}} selected {{/if}} value="name">Tên</option>
                        <option {{#if (ifEquals orderBy "price" )}} selected {{/if}} value="price">Giá</option>
                        <option {{#if (ifEquals orderBy "createdAt" )}} selected {{/if}} value="createdAt">Ngày
                            đăng</option>
                        <option {{#if (ifEquals orderBy "updatedAt" )}} selected {{/if}} value="updatedAt">Ngày
                            cập nhật</option>
                        <option {{#if (ifEquals orderBy "saled" )}} selected {{/if}} value="saled">Lượt bán</option>
                        <!-- Thêm các lựa chọn khác nếu cần -->
                    </select>

                    <label class="ms-4" for="order">Thứ tự:</label>
                    <select class="btn border" id="order" name="order">
                        <option {{#if (ifEquals order "ASC" )}} selected {{/if}} value="ASC">Tăng dần</option>
                        <option {{#if (ifEquals order "DESC" )}} selected {{/if}} value="DESC">Giảm dần</option>
                    </select>

                    <button class="btn btn-primary ms-2" type="submit">Filter</button>
                </form>
                {{#unless projects}}
                <ul class="text-center" style="list-style: none;">
                    <li>Chưa có dự án nào</li>
                </ul>
                {{/unless}}


            </div>


            <li class="d-flex gap-2 mt-2" style="" data-id="{{this.id}}">

                {{#each projects}}
                {{#if (ifEquals this.user.id user.id)}}
                <div class="card project-item " style="flex-basis: 260px;flex-shrink: 0;flex-grow: 0; border-radius: 0">
                    {{#each images}}
                    {{#if this.isCoverImage}}
                    <img src="{{this.url}}" class="game__thumbnail" width="100%" height="100%"
                        style="max-height: 200px; min-height:200px">
                    {{/if}}
                    {{/each}}
                    {{!-- <img src="{{this.image}}" class="game__thumbnail" width="100%"> --}}
                    <div class="card-body pb-0 ">
                        <p class="p-0 m-0 viewCount"><i class="me-1 fa-solid fa-eye text-white"></i> 0 </p>
                        <p class="p-0 m-0 likeCount"><i class="me-1 fa-solid fa-heart text-danger"></i> 20 </p>
                        {{#if isPublic}}
                        <p class="p-0 m-0 visibility " title="Công khai"><i class="me-1 fa-solid fa-lock-open"></i> Công
                            khai </p>
                        {{else }}
                        <p class="p-0 m-0 visibility " title="Riêng tư"><i
                                class="me-1 fa-solid fa-lock text-danger"></i> Riêng tư </p>

                        {{/if}}
                        <a href="/project/{{this.slug}}/view" class="card-title fs-5">{{this.name}}</a>

                        <p class="mt-2  card-text clamped-text-3 ">{{this.short_description}}</p>
                        {{#if (ifEquals this.price '0')}}
                        <p>Miễn phí</p>
                        {{else}}
                        <p>Giá: {{vndFormat this.price}}</p>
                        {{/if}}


                    </div>
                    <p class="p-0 m-0 "><i class="fa-solid fa-coins"></i> {{this.saledCount}} lượt mua</p>


                    <div class="">
                        {{!-- <a href="/project/{{this.slug}}/view">Xem</a> | --}}
                        <a href="/user/project/{{this.id}}/edit">Điều chỉnh trang</a> |
                        <a href="/user/project/{{this.id}}/delete">Xoá</a>
                    </div>
                </div>

                {{/if}}
                {{/each}}

            </li>


        </ul>

</main>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js">
</script>
<script src="/javascripts/my_project.js"></script>